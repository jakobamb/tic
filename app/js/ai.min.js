var ai={choice:null,score:function(t){var e=board.checkState(t);return"p1win"===e?-10:"p2win"===e?10:0},getAvailableMoves:function(t){for(var e=[],i=0;i<BOARD_SIZE;i++)for(var a=0;a<BOARD_SIZE;a++)0===t[a][i]&&e.push([a,i]);return e},getNewState:function(t,e){var i={turn:1===t.turn?2:1};return i.state=[t.state[0].slice(0),t.state[1].slice(0),t.state[2].slice(0)],i.state[e[0]][e[1]]=t.turn,i},minimax:function(t){if(board.gameOver(t.state))return this.score(t.state);for(var e=[],i=[],a=this.getAvailableMoves(t.state),r=0;r<a.length;r++){var n=this.getNewState(t,a[r]);e.push(this.minimax(n)),i.push(a[r])}if(2===t.turn){var s=getMaxIndex(e);return this.choice=i[s],e[s]}var c=getMinIndex(e);return this.choice=i[c],e[c]},getChoice:function(t){return this.minimax(t),console.log("best calculated placement: "+this.choice),this.choice}};