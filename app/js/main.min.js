"use strict";function charSelection(){$("#logo").html("<h1>X || O?</h1>"),2===mode&&$(".mp-menu-only").css("display","block"),$(".mode-selector").css("display","none"),$(".char-selector").css("display","block")}function startGame(){board.init(),$("#logo, .menu").css("display","none"),$(".gameover-window").css("display","none"),$(".board").fadeIn(500)}function gameOver(e){switch(e){case"tie":$(".gameover-message").html("It's a tie!");break;case"p1win":$(".gameover-message").html("Player 1 <br> wins!");break;case"p2win":$(".gameover-message").html("Player 2 <br> wins!")}$(".gameover-window").fadeIn(300)}function resetAll(){$(".board").css("display","none"),$(".board , .gameover-window , .mp-menu-only, .char-selector").css("display","none"),$(".mode-selector").css("display","block"),$("#logo").fadeIn(200),$(".menu").fadeIn(500)}var mode,p1char,turn=1,signCircle='<div class="sign">&#9675</div>',signCross='<div class="sign">&#215</div>',board={init:function(){for(var e=0;e<3;e++)for(var r=0;r<3;r++)this[e][r]=0;$("#f"+e).html("")},getFieldById:function(e){return e=parseInt(e[1]),e<3?this[0][e]:e<6?this[1][e-3]:this[2][e-6]},getId:function(e,r){return"f"+(e+3*r)},checkState:function(){var e,r;console.log("vert");for(var n=0;n<4;n++){e=0,r=0;for(var i=n;i<n+7;i+=3){if(1===this["f"+i]?e++:2===this["f"+i]&&r++,3===e)return gameOver("p1win");if(3===r)return gameOver("p2win")}}console.log("diag");for(var n=2;n<=4;n+=2){e=0,r=0;for(var i=4-n;i<=4-n+2*n;i+=n)1===this["f"+i]?e++:2===this["f"+i]&&r++;if(3===e)return gameOver("p1win");if(3===r)return gameOver("p2win")}for(var t=0,n=0;n<=6;n+=3){e=0,r=0;for(var i=n;i<=n+2;i++){if(1===this["f"+i]?(e++,t++):2===this["f"+i]&&(r++,t++),3===e)return gameOver("p1win");if(3===r)return gameOver("p2win")}if(9===t)return gameOver("tie")}}};$(document).ready(function(){$("#1player").click(function(){mode=1,charSelection()}),$("#2player").click(function(){mode=2,charSelection()}),$(".char-selector").click(function(){p1char="char-x"===this.id?"x":"o",startGame()}),$(".field").click(function(){""===$(this).html()&&($(this).html(1===turn&&"x"===p1char||2===turn&&"o"===p1char?signCross:signCircle),board[$(this).attr("id")]=turn,board.checkState(),turn=1===turn?2:1)}),$("#gameover-restart").click(function(){startGame()}),$("#gameover-back").click(function(){resetAll()})});