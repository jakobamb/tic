// ////////////////////////////////////////////////////////////////
// Required
// ////////////////////////////////////////////////////////////////

var gulp = require('gulp'),
    uglify = require('gulp-uglify'),
    rename = require('gulp-rename'),
    plumber = require('gulp-plumber'),
    autoprefixer = require('gulp-autoprefixer');

// ////////////////////////////////////////////////////////////////
// Scripts Task
// ////////////////////////////////////////////////////////////////
gulp.task('scripts', function() {
    gulp.src(['app/js/**/*.js', '!app/js/**/*.min.js'])
        .pipe(plumber())
        .pipe(rename({
            suffix: '.min'
        }))
        .pipe(uglify())
        .pipe(gulp.dest('app/js'));
    gulp.src(['app/css/*.css', '!app/css/*-dist.css'])
        .pipe(autoprefixer({
            browsers: ['last 2 versions'],
            cascade: false
        }))
        .pipe(rename({
            suffix: '-dist'
        }))
        .pipe(gulp.dest('app/css'));
});
// ////////////////////////////////////////////////////////////////
// HTML Task
// ////////////////////////////////////////////////////////////////

// ////////////////////////////////////////////////////////////////
// watch Task
// ////////////////////////////////////////////////////////////////
gulp.task('watch', function() {
    gulp.watch(['app/js/**/*.js','app/css/**/*.css'], ['scripts']);
});

// ////////////////////////////////////////////////////////////////
// Default Task
// ////////////////////////////////////////////////////////////////
gulp.task('default', ['scripts', 'watch']);
